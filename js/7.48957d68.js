(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{7367:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",[s("div",{staticClass:"q-pa-md q-gutter-md"},[s("q-list",{staticClass:"rounded-borders",attrs:{bordered:"",padding:""}},[s("div",{staticClass:"row"},[s("q-item-section",{attrs:{avatar:""}},[s("q-btn",{attrs:{flat:"",round:"",icon:"refresh"},on:{click:function(t){return e.refresh()}}})],1),s("q-item-section",[s("b",[e._v("Scada Users")])])],1),s("q-separator"),e._l(e.users,(function(t){return s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:t.Username,attrs:{clickable:""}},[s("q-item-section",{attrs:{avatar:"",top:""}},[s("q-avatar",{attrs:{size:"lg",color:"blue","text-color":"white"}},[e._v(e._s(t.Fullname.getInitials())+"\n          ")])],1),s("q-item-section",[s("q-item-label",{attrs:{lines:"1"}},[e._v(e._s(t.Fullname))]),s("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.Username))])],1),s("q-item-section",{attrs:{side:""}},[s("div",{staticClass:"row"},[s("q-btn",{attrs:{dense:"","text-color":"amber",flat:"",icon:"create"},on:{click:function(s){return e.openEditUserModel({open:!0,user:t})}}}),s("q-btn",{attrs:{"text-color":"red",flat:"",dense:"",icon:"delete"},on:{click:function(s){return e.deleteUser(t)}}})],1)])],1)})),s("div",{staticClass:"q-mr-sm text-right"},[s("q-btn",{attrs:{round:"",color:"secondary",icon:"add"},on:{click:function(t){return e.openCreateUserModel(!0)}}})],1)],2),s("q-dialog",{model:{value:e.showEditModal,callback:function(t){e.showEditModal=t},expression:"showEditModal"}},[s("q-card",{staticStyle:{"min-width":"330px"}},[s("q-card-section",{staticClass:"q-pb-none"},[s("div",{staticClass:"text-h6"},[e._v("User Edit")])]),s("q-card-section",[s("div",{staticClass:"q-mb-sm"},[s("q-input",{attrs:{dense:"",label:"Username",readonly:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"face"}})]},proxy:!0}]),model:{value:e.editModel.Username,callback:function(t){e.$set(e.editModel,"Username",t)},expression:"editModel.Username"}})],1),s("div",{staticClass:"q-mb-sm"},[s("q-input",{attrs:{dense:"",label:"Full Name",rules:[function(e){return!!e||"Field is required"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"perm_contact_calendar"}})]},proxy:!0}]),model:{value:e.editModel.Fullname,callback:function(t){e.$set(e.editModel,"Fullname",t)},expression:"editModel.Fullname"}})],1),s("div",{staticClass:"q-mb-sm"},[s("q-input",{attrs:{dense:"",label:"Privilege",rules:[function(e){return!!e||"Field is required"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"edit_attributes"}})]},proxy:!0}]),model:{value:e.editModel.Privilege,callback:function(t){e.$set(e.editModel,"Privilege",t)},expression:"editModel.Privilege"}})],1),s("div",{staticClass:"q-mb-sm"},[s("q-input",{attrs:{dense:"",type:"password",label:"Password",rules:[function(e){return!!e||"Field is required"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"vpn_key"}})]},proxy:!0}]),model:{value:e.editModel.Password,callback:function(t){e.$set(e.editModel,"Password",t)},expression:"editModel.Password"}})],1),s("div",{staticClass:"q-mb-sm"},[s("q-input",{attrs:{dense:"",type:"password",label:"Password",rules:[function(e){return!!e||"Field is required"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"vpn_key"}})]},proxy:!0}]),model:{value:e.editModel.confirm,callback:function(t){e.$set(e.editModel,"confirm",t)},expression:"editModel.confirm"}})],1)]),s("q-card-actions",{staticClass:"text-primary q-pt-none ",attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"secondary","icon-right":"send",label:"UPDATE"},on:{click:function(t){return e.updateUser()}}})],1)],1)],1),s("q-dialog",{model:{value:e.showCreateModal,callback:function(t){e.showCreateModal=t},expression:"showCreateModal"}},[s("q-card",{staticStyle:{"min-width":"330px"}},[s("q-card-section",{staticClass:"q-pb-none"},[s("div",{staticClass:"text-h6"},[e._v("Create User")])]),s("q-card-section",[s("div",{staticClass:"q-mb-sm"},[s("q-input",{attrs:{dense:"",label:"Username",rules:[function(e){return!!e||"Field is required"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"face"}})]},proxy:!0}]),model:{value:e.createModel.Username,callback:function(t){e.$set(e.createModel,"Username",t)},expression:"createModel.Username"}})],1),s("div",{staticClass:"q-mb-sm"},[s("q-input",{attrs:{dense:"",label:"Full Name",rules:[function(e){return!!e||"Field is required"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"perm_contact_calendar"}})]},proxy:!0}]),model:{value:e.createModel.Fullname,callback:function(t){e.$set(e.createModel,"Fullname",t)},expression:"createModel.Fullname"}})],1),s("div",{staticClass:"q-mb-sm"},[s("q-input",{attrs:{dense:"",label:"Privilege",rules:[function(e){return!!e||"Field is required"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"edit_attributes"}})]},proxy:!0}]),model:{value:e.createModel.Privilege,callback:function(t){e.$set(e.createModel,"Privilege",t)},expression:"createModel.Privilege"}})],1),s("div",{staticClass:"q-mb-sm"},[s("q-input",{attrs:{dense:"",type:"password",label:"Password",rules:[function(e){return!!e||"Field is required"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"vpn_key"}})]},proxy:!0}]),model:{value:e.createModel.Password,callback:function(t){e.$set(e.createModel,"Password",t)},expression:"createModel.Password"}})],1),s("div",{staticClass:"q-mb-sm"},[s("q-input",{attrs:{dense:"",type:"password",label:"Password",rules:[function(e){return!!e||"Field is required"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"vpn_key"}})]},proxy:!0}]),model:{value:e.createModel.confirm,callback:function(t){e.$set(e.createModel,"confirm",t)},expression:"createModel.confirm"}})],1)]),s("q-card-actions",{staticClass:"text-primary q-pt-none ",attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"secondary","icon-right":"send",label:"CREATE"},on:{click:function(t){return e.createUser()}}})],1)],1)],1)],1)])},a=[],i=s("6afc"),n={name:"UserManagement",data(){return{users:[],myvalue:"",rpcgetallusers:"",rpccreateuser:"",rpcdeleteuser:"",rpcedituser:"",responsejson:"",showCreateModal:!1,showEditModal:!1,createModel:{Username:"",Fullname:"",Privilege:"",Password:"",confirm:""},editModel:{Username:"",Fullname:"",Privilege:"",Password:"",confirm:""},card:!0}},methods:{refresh:function(){console.log("refresh"),this.rpcgetallusers=i["b"].callrpc("Access","GetAllUsers","{}")},openCreateUserModel:function(e){console.log("clicked"),this.showCreateModal=e},openEditUserModel:function(e){this.showEditModal=e.open,e.open&&(this.editModel.Username=e.user.Username,this.editModel.Fullname=e.user.Fullname,this.editModel.Privilege=e.user.Privilege)},createUser(){""!==this.createModel.Username&&""!==this.createModel.Fullname&&""!==this.createModel.Privilege&&""!==this.createModel.Password&&""!==this.createModel.confirm&&this.createModel.Password==this.createModel.confirm&&(this.showCreateModal=!1,this.rpccreateuser=i["b"].callrpc("Access","CreateUser",JSON.stringify(this.createModel)))},updateUser(){""!==this.editModel.Username&&""!==this.editModel.Fullname&&""!==this.editModel.Privilege&&""!==this.editModel.Password&&""!==this.editModel.confirm&&this.editModel.Password==this.editModel.confirm&&(this.showEditModal=!1,this.rpcedituser=i["b"].callrpc("Access","ChangeUser",JSON.stringify(this.editModel)))},deleteUser(e){this.$q.dialog({title:"Confirm",message:"Would you like delete '"+e.Fullname+"'?",cancel:!0,persistent:!0}).onOk((()=>{this.rpcdeleteuser=i["b"].callrpc("Access","DeleteUser",JSON.stringify(e))}))}},created:function(){this.refresh(),i["a"].$on("RpcResult",(e=>{if(e.uid===this.rpcgetallusers)for(var t in this.users=[],e.message)this.users.push(e.message[t]);e.uid===this.rpccreateuser&&201==e.message.Id&&this.refresh(),e.uid===this.rpcdeleteuser&&200==e.message.Id&&this.refresh(),e.uid===this.rpcedituser&&200==e.message.Id&&this.refresh()}))}},l=n,o=s("2877"),d=s("9989"),c=s("1c1c"),u=s("4074"),p=s("9c40"),m=s("eb85"),f=s("66e5"),q=s("cb32"),h=s("0170"),M=s("24e8"),v=s("f09f"),b=s("a370"),g=s("27f9"),w=s("0016"),y=s("4b7e"),k=s("714f"),C=s("7f67"),U=s("eebe"),x=s.n(U),P=Object(o["a"])(l,r,a,!1,null,"51e94828",null);t["default"]=P.exports;x()(P,"components",{QPage:d["a"],QList:c["a"],QItemSection:u["a"],QBtn:p["a"],QSeparator:m["a"],QItem:f["a"],QAvatar:q["a"],QItemLabel:h["a"],QDialog:M["a"],QCard:v["a"],QCardSection:b["a"],QInput:g["a"],QIcon:w["a"],QCardActions:y["a"]}),x()(P,"directives",{Ripple:k["a"],ClosePopup:C["a"]})}}]);