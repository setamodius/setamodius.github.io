(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{0:function(e,n,t){e.exports=t("2f39")},"0047":function(e,n,t){},1:function(e,n){},2:function(e,n){},"2f39":function(e,n,t){"use strict";t.r(n);var a=t("a34a"),r=t.n(a),o=(t("a481"),t("96cf"),t("c973")),i=t.n(o),c=(t("7d6e"),t("e54f"),t("985d"),t("0047"),t("2b0e")),u=t("1f91"),s=t("42d2"),l=t("b05d"),p=t("4d5a"),f=t("e359"),d=t("9404"),m=t("09e3"),b=t("9989"),h=t("65c6"),g=t("6ac5"),v=t("9c40"),x=t("0016"),w=t("1c1c"),Q=t("66e5"),S=t("4074"),k=t("0170"),y=t("4e73"),C=t("24e8"),T=t("f09f"),U=t("a370"),$=t("4b7e"),M=t("27f9"),q=t("f20b"),D=t("7ff0"),F=t("cb32"),I=t("eb85"),O=t("58a8"),P=t("0e51"),R=t("068f"),J=t("adad"),A=t("823b"),L=t("429bb"),N=t("7460"),V=t("eaac"),W=t("357e"),j=t("bd08"),B=t("db86"),z=t("714f"),E=t("7f67"),_=t("b12a"),G=t("f5084"),H=t("2a19"),Z=t("436b");c["a"].use(l["a"],{config:{},lang:u["a"],iconSet:s["a"],components:{QLayout:p["a"],QHeader:f["a"],QDrawer:d["a"],QPageContainer:m["a"],QPage:b["a"],QToolbar:h["a"],QToolbarTitle:g["a"],QBtn:v["a"],QIcon:x["a"],QList:w["a"],QItem:Q["a"],QItemSection:S["a"],QItemLabel:k["a"],QMenu:y["a"],QDialog:C["a"],QCard:T["a"],QCardSection:U["a"],QCardActions:$["a"],QInput:M["a"],QBtnDropdown:q["a"],QFooter:D["a"],QAvatar:F["a"],QSeparator:I["a"],QBadge:O["a"],QResponsive:P["a"],QImg:R["a"],QTabPanels:J["a"],QTabPanel:A["a"],QTabs:L["a"],QTab:N["a"],QTable:V["a"],QTh:W["a"],QTr:j["a"],QTd:B["a"]},directives:{Ripple:z["a"],ClosePopup:E["a"]},plugins:{AppFullscreen:_["a"],Loading:G["a"],Notify:H["a"],Dialog:Z["a"]}});var K=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"q-app"}},[t("router-view")],1)},X=[],Y=t("fb19"),ee=t.n(Y);c["a"].component("vue-draggable-resizable",ee.a);var ne,te={name:"App",created:function(){this.$q.dark.set(!0)}},ae=te,re=t("2877"),oe=Object(re["a"])(ae,K,X,!1,null,null,null),ie=oe.exports,ce=t("2f62"),ue=t("6afc"),se={isConnected:!1,isConnecting:!1,currentUsername:"",currentUserFullname:""},le={updateStatus:function(e,n){console.log(n),e.isConnected=n},updateConnectingStatus:function(e,n){e.isConnecting=n},loginSuccess:function(e,n){e.currentUserFullname=n.message.Fullname,e.currentUsername=n.message.Username},login:function(e,n){}},pe={updateStatus:function(e,n){var t=e.commit;t("updateStatus",n)},login:function(e,n){var t=e.commit;t("login",n)}},fe={isConnected:function(e){return e.isConnected},isDisconnected:function(e){return!e.isConnected},CurrentUser:function(e){return e.currentUsername},CurrentUserFullname:function(e){return e.currentUserFullname}},de={namespaced:!0,state:se,mutations:le,actions:pe,getters:fe};t("cf57");c["a"].use(ce["a"]);var me=function(e){ue["a"].$on("WorkerStatusChanged",(function(n){console.log("status changed"+n),e.commit("auth/updateStatus",n.isconnected),e.commit("auth/updateConnectingStatus",!1),G["a"].hide(),n.isconnected?(ne=ue["b"].callrpc("Access","GetUser",JSON.stringify({Username:ue["b"].options.username})),H["a"].create({message:"Connected to server",color:"green"})):H["a"].create({message:"Disconnected from server",color:"red"})})),ue["a"].$on("RpcResult",(function(n){n.uid===ne&&void 0!==n.message.Fullname&&(e.commit("auth/loginSuccess",n),n.message.Fullname)})),ue["a"].$on("ErrorReceived",(function(e){H["a"].create({message:e.error,color:"red"})})),e.subscribe((function(n){"auth/login"===n.type&&(ue["b"].connect(n.payload.Server,n.payload.Username,n.payload.Password),e.commit("auth/updateConnectingStatus",!0),G["a"].show())}))},be=function(){var e=new ce["a"].Store({modules:{auth:de},plugins:[me],strict:!1});return e},he=t("8c4f"),ge=[{path:"/",component:function(){return t.e(4).then(t.bind(null,"713b"))},children:[{path:"",name:"Savronik Scada",component:function(){return t.e(8).then(t.bind(null,"ec95"))}},{path:"/middlevoltage",name:"Middle Voltage",component:function(){return Promise.all([t.e(0),t.e(7)]).then(t.bind(null,"f4bb"))}},{path:"/lighting",name:"Lighting",component:function(){return t.e(9).then(t.bind(null,"5c39"))}},{path:"/ventilation",name:"Ventilation",component:function(){return t.e(3).then(t.bind(null,"4053"))}},{path:"/usermanagement",name:"User Management",component:function(){return t.e(10).then(t.bind(null,"7367"))}},{path:"/projectmanagement",name:"Project Management",component:function(){return t.e(6).then(t.bind(null,"ced8"))}}]}];ge.push({path:"*",component:function(){return t.e(5).then(t.bind(null,"e51e"))}});var ve=ge;c["a"].use(he["a"]);var xe=function(){var e=new he["a"]({scrollBehavior:function(){return{x:0,y:0}},routes:ve,mode:"hash",base:""});return e},we=function(){return Qe.apply(this,arguments)};function Qe(){return Qe=i()(r.a.mark((function e(){var n,t,a;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("function"!==typeof be){e.next=6;break}return e.next=3,be({Vue:c["a"]});case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=be;case 7:if(n=e.t0,"function"!==typeof xe){e.next=14;break}return e.next=11,xe({Vue:c["a"],store:n});case 11:e.t1=e.sent,e.next=15;break;case 14:e.t1=xe;case 15:return t=e.t1,n.$router=t,a={el:"#q-app",router:t,store:n,render:function(e){return e(ie)}},e.abrupt("return",{app:a,store:n,router:t});case 19:case"end":return e.stop()}}),e)}))),Qe.apply(this,arguments)}t("4917");function Se(){return ke.apply(this,arguments)}function ke(){return ke=i()(r.a.mark((function e(){var n,t,a,o,i,u,s,l,p;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,we();case 2:n=e.sent,t=n.app,a=n.store,o=n.router,i=!0,u=function(e){i=!1,window.location.href=e},s=window.location.href.replace(window.location.origin,""),l=[ue["c"],void 0],p=0;case 11:if(!(!0===i&&p<l.length)){e.next=29;break}if("function"===typeof l[p]){e.next=14;break}return e.abrupt("continue",26);case 14:return e.prev=14,e.next=17,l[p]({app:t,router:o,store:a,Vue:c["a"],ssrContext:null,redirect:u,urlPath:s});case 17:e.next=26;break;case 19:if(e.prev=19,e.t0=e["catch"](14),!e.t0||!e.t0.url){e.next=24;break}return window.location.href=e.t0.url,e.abrupt("return");case 24:return console.error("[Quasar] boot error:",e.t0),e.abrupt("return");case 26:p++,e.next=11;break;case 29:if(!1!==i){e.next=31;break}return e.abrupt("return");case 31:new c["a"](t);case 32:case"end":return e.stop()}}),e,null,[[14,19]])}))),ke.apply(this,arguments)}String.prototype.getInitials=function(e){if("undefined"==typeof e)e=!0;var n=this.replace(/[^a-zA-Z- ]/g,"").match(/\b\w/g);return e?(null==n&&(n=["-"]),n.join("")):n},String.prototype.capitalize=function(){return this.toLowerCase().replace(/\b\w/g,(function(e){return e.toUpperCase()}))},Se()},3:function(e,n){},4:function(e,n){},"6afc":function(e,n,t){"use strict";t.d(n,"a",(function(){return g})),t.d(n,"b",(function(){return v}));var a=t("a34a"),r=t.n(a),o=(t("96cf"),t("c973")),i=t.n(o),c=t("2b0e"),u=(t("6b54"),t("06db"),t("a481"),t("28a5"),t("970b")),s=t.n(u),l=t("5bc3"),p=t.n(l),f=t("9523"),d=t.n(f),m=t("e7fc"),b=t.n(m),h=function(){function e(n){s()(this,e),d()(this,"callrpc",(function(e,n,t){var a=this.createuid(),r="Scada/to/"+e+"/from/"+this.options.clientid+"/"+n+"/req/"+a;return console.log(r),this.innerclient.publish(r,t,{qos:2,retain:!1}),a})),this.innerbus=n}return p()(e,[{key:"connect",value:function(e,n,t){var a={status:"disconnect",timestamp:(new Date).toISOString()},r="WebConfigurator";this.options={username:n,password:t,clientid:r,will:{topic:"MQTT/"+r+"-"+n+"/Status",payload:JSON.stringify(a),qos:2,retain:!0}};var o=b.a.connect(e,this.options);this.innerclient=o;var i=this;o.on("error",(function(e){console.log(e),i.innerbus.$emit("ErrorReceived",{error:e})})),o.on("connect",(function(){i.innerbus.$emit("WorkerStatusChanged",{isconnected:!0}),o.subscribe("MQTT/#",(function(){})),o.subscribe("Scada/to/"+this.options.clientid+"/from/+/+/+/+",(function(){}));var e={status:"online",timestamp:(new Date).toISOString()};o.publish("MQTT/"+this.options.clientid+"-"+this.options.username+"/Status",JSON.stringify(e),{qos:2,retain:!0})})),o.on("offline",(function(){i.innerbus.$emit("WorkerStatusChanged",{isconnected:!1})}));var c={};this.workers=c,o.on("message",(function(e,n){console.log(e);var t=e.split("/");if("MQTT"===t[0]){var a=t[1].split("-")[0],r=t[1].split("-")[1];if(0==n.length)delete c[a+r];else{var u=JSON.parse(n);c[a+r]={workername:a,username:r,timestamp:new Date(u.timestamp),status:u.status}}i.innerbus.$emit("OtherWorkersStatus",c)}if("Scada"===t[0]&&8==t.length&&0!=n.length){o.publish(e,"",{qos:2,retain:!0});var s=t[7];i.innerbus.$emit("RpcResult",{uid:s,message:JSON.parse(n)})}}))}},{key:"createuid",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=16*Math.random()|0,t="x"==e?n:3&n|8;return t.toString(16)}))}},{key:"removeworker",value:function(e){var n="MQTT/"+e.workername+"-"+e.username+"/Status";this.innerclient.publish(n,"",{qos:2,retain:!0})}},{key:"getworkers",value:function(){return this.workers}}]),e}(),g=new c["a"],v=new h(g);n["c"]=i()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}},[[0,2,0]]]);