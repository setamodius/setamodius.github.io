(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"45d8":function(e,t,s){"use strict";s("af5d")},"916e":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",[s("div",{staticClass:"q-pa-md q-gutter-sm"},[s("q-breadcrumbs",[s("q-breadcrumbs-el",{attrs:{icon:"home",to:"/"}}),s("q-breadcrumbs-el",{attrs:{label:e.$t("ipcheckadaptor"),icon:"navigation",to:"/vue-components/breadcrumbs"}})],1)],1),s("div",{staticClass:"q-pa-md q-gutter-md"},[s("q-btn-group",{attrs:{push:""}},[s("q-btn",{attrs:{push:"",color:"secondary",label:"Get Settings",icon:"get_app"},on:{click:e.getsettings}}),s("q-btn",{attrs:{push:"",color:"secondary",label:"Put Settings",icon:"publish"},on:{click:e.putsettings}})],1),s("q-expansion-item",{attrs:{icon:"list",label:"IP Check Settings","header-class":"bg-primary text-white","default-opened":"",dense:""}},[s("q-card",[s("q-card-section",{staticClass:"q-pb-none"},[s("q-btn",{attrs:{dense:"",color:"secondary","icon-right":"file_download",label:"Export"},on:{click:e.exportdevices}}),s("q-btn",{staticClass:"q-ml-sm",attrs:{dense:"",color:"secondary","icon-right":"file_upload",label:"Import"}},[s("q-popup-edit",{attrs:{"content-class":"bg-grey text-white"},model:{value:e.importdevicesfile,callback:function(t){e.importdevicesfile=t},expression:"importdevicesfile"}},[s("q-file",{attrs:{dense:"",borderless:"",label:"Select file"},model:{value:e.importdevicesfile,callback:function(t){e.importdevicesfile=t},expression:"importdevicesfile"}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{disabled:null===e.importdevicesfile,color:"secondary","icon-right":"file_upload",label:"Import",dense:""},on:{click:e.importdevices}})],1)],1)],1),s("q-card-section",[s("vue-excel-editor",{ref:"mgrid",staticClass:"exceltable",attrs:{"no-header-edit":!0},model:{value:e.Devices,callback:function(t){e.Devices=t},expression:"Devices"}},[s("vue-excel-column",{attrs:{field:"IsActive",label:"Is Active",width:"100px",type:"map",options:{1:"Active",0:"Passive"}}}),s("vue-excel-column",{attrs:{field:"Target",label:"Target",width:"600px",type:"string","key-field":!0}}),s("vue-excel-column",{attrs:{field:"Ip",label:"Ip",width:"100px",type:"string"}}),s("vue-excel-column",{attrs:{field:"Frequency",label:"Frequency",width:"100px",type:"number"}}),s("vue-excel-column",{attrs:{field:"Timeout",label:"Timeout",width:"100px",type:"number"}})],1),s("div",{staticClass:"row"},[s("q-btn",{on:{click:function(t){return e.addnewrow()}}},[e._v("Add New Row")]),s("q-btn",{on:{click:function(t){return e.deleteselected()}}},[e._v("Delete Selected Row")])],1)],1),s("q-card-section",[s("q-btn",{attrs:{color:"accent"},on:{click:function(t){e.card=!0,e.pingresult={}}}},[e._v("Test")]),s("q-dialog",{model:{value:e.card,callback:function(t){e.card=t},expression:"card"}},[s("q-card",{staticClass:"my-card"},[s("q-card-section",[s("q-card-section",{staticClass:"row items-center q-pa-none",staticStyle:{"min-width":"300px"}},[s("div",{staticClass:"text-h6"},[e._v("Ping Test Tool")]),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",dense:"",color:"negative"}})],1),s("div",{staticClass:"q-pa-none"}),s("div",{staticClass:"row",staticStyle:{"min-width":"300px"}},[s("q-input",{staticStyle:{"min-width":"300px"},attrs:{dense:"",label:"IP address",type:"text",rules:[function(e){return!!e||"Field is required"}]},model:{value:e.requestIp,callback:function(t){e.requestIp=t},expression:"requestIp"}})],1)],1),s("q-separator"),void 0!==e.pingresult.Result?s("div",{staticClass:"q-pa-md row justify-center"},[s("div",{staticClass:"q-pa-sm"},[e._v("Result :")]),s("div",{staticClass:"q-pa-sm"},[e.pingresult.Result?s("q-avatar",{attrs:{rounded:"",color:"positive","text-color":"white",icon:"check",size:"24px"}}):s("q-avatar",{attrs:{rounded:"",color:"negative","text-color":"white",icon:"close",size:"24px"}})],1)]):e._e(),s("q-separator"),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{attrs:{color:"accent",label:"Ping"},on:{click:function(t){e.pingDevice(),e.pingresult={}}}})],1)],1)],1)],1)],1)],1)],1)])},a=[],o=(s("ddb0"),s("6afc")),c=s("2b0e"),r=s("07b2"),n=s("ee8f"),l=s("a357");const d=new c["default"];c["default"].use(r["a"]);var p={name:"IpCheckAdaptor",data(){return{card:!1,requestIp:"localhost",pingresult:{},Devices:[],selected:{},importdevicesfile:null}},methods:{getsettings:async function(){this.WorkerName=n["a"].getResponseWebConfig().devicepingerAdapter.workername;let e=n["a"].getResponseWebConfig().devicepingerAdapter.uniquekey,t=await n["a"].getRequestConfigAPI("config",this.WorkerName,e);t[0]?(this.Devices=t[2].value.Devices,this.$q.notify({type:"positive",message:this.$t("get_request_success_message")+"\t(Status Code : "+t[1]+")",actions:[{label:"ok",color:"gray",handler:()=>{}}]})):this.$q.notify({type:"negative",message:this.$t("get_request_error_message")+"\t(Status Code : "+t[1]+")",actions:[{label:"ok",color:"gray",handler:()=>{}}]})},putsettings:async function(){this.WorkerName=n["a"].getResponseWebConfig().devicepingerAdapter.workername;let e=n["a"].getResponseWebConfig().devicepingerAdapter.uniquekey;const t={Devices:this.Devices};let s=await n["a"].putRequestConfigAPI("config",this.WorkerName,e,t);s[0]?this.$q.notify({type:"positive",message:this.$t("put_request_success_message")+"\t(Status Code : "+s[1]+")",actions:[{label:"ok",color:"gray",handler:()=>{}}]}):this.$q.notify({type:"negative",message:this.$t("put_request_error_message")+"\t(Status Code : "+s[1]+")",actions:[{label:"ok",color:"gray",handler:()=>{}}]})},gettitle(e,t,s){return e+":"+t+(1===s?" (Enabled)":"")},addmodbusslave(){let e={Ip:"localhost",Port:502,SlaveID:1,PoolingRate:1e3,Target:"IsOnline",IsActive:0,Timeout:1e4,Read:{CoilStatus:[],InputStatus:[],HoldingRegisters:[],InputRegisters:[]},Write:{CoilStatus:[],HoldingRegisters:[]}};this.Devices.push(e)},deleteslave(e){var t=this.Devices.indexOf(e);this.Devices.splice(t,1)},pingDevice:function(){let e={Ip:this.requestIp,Timeout:3e3};this.rpcgetpingresult=o["c"].callrpc(this.WorkerName,"PingDevice",JSON.stringify(e))},deleteselected(){this.$refs.mgrid.deleteSelectedRecords()},addnewrow(){const e={IsActive:0,Target:"-Target-",Ip:"localhost",Frequency:"2000",Timeout:"4000"};this.$refs.mgrid.newRecord(e)},exportdevices:function(){let e=[];for(var t of this.Devices)e.push({IsActive:t.IsActive,Ip:t.Ip,Target:t.Target,Frequency:t.Frequency,Timeout:t.Timeout});const s=Object(l["a"])("addresses.csv",this.$papa.unparse(e,{delimiter:","}));!0===s?console.log("File downloaded"):console.log("Error: "+s)},importdevices:function(){let e=this,t=[];this.$papa.parse(this.importdevicesfile,{header:!0,step:function(e){void 0!==e.data&&t.push(e.data)},complete:function(s,i){for(var a of t)void 0!==a&&void 0!==a.IsActive&&void 0!==a.Ip&&void 0!==a.Target&&void 0!==a.Frequency&&void 0!==a.Timeout&&e.Devices.push({IsActive:a.IsActive,Ip:a.Ip,Target:a.Target,Frequency:a.Frequency,Timeout:a.Timeout})}})}},created:function(){d.$on("settingreceived",(e=>{})),o["b"].$on("RpcResult",(e=>{e.uid===this.rpcgetpingresult&&(this.pingresult=e.message)}))},components:{modbusslave:s("8222").default}},u=p,v=(s("45d8"),s("2877")),g=s("9989"),m=s("ead5"),f=s("079eb"),b=s("e7a9"),h=s("9c40"),q=s("3b73"),y=s("f09f"),w=s("a370"),I=s("42a1"),x=s("7d53"),k=s("24e8"),C=s("2c91"),_=s("27f9"),T=s("eb85"),S=s("cb32"),A=s("4b7e"),R=s("7f67"),D=s("eebe"),Q=s.n(D),$=Object(v["a"])(u,i,a,!1,null,"639cea8c",null);t["default"]=$.exports;Q()($,"components",{QPage:g["a"],QBreadcrumbs:m["a"],QBreadcrumbsEl:f["a"],QBtnGroup:b["a"],QBtn:h["a"],QExpansionItem:q["a"],QCard:y["a"],QCardSection:w["a"],QPopupEdit:I["a"],QFile:x["a"],QDialog:k["a"],QSpace:C["a"],QInput:_["a"],QSeparator:T["a"],QAvatar:S["a"],QCardActions:A["a"]}),Q()($,"directives",{ClosePopup:R["a"]})},af5d:function(e,t,s){}}]);